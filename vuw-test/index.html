<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ticker with Smooth Refresh</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- ...your styles here, as above... -->
    <style>
        body { background: #123; }
        .ticker-container { height: 200px; width: 100vw; overflow: hidden; }
        .ticker-scroll {
            display: flex;
            align-items: center;
            white-space: nowrap;
            animation: scroll 40s linear infinite;
        }
        @keyframes scroll {
            0% { transform: translateX(0);}
            100% { transform: translateX(-50%);}
        }
        .transport-item {
            min-width: 300px; margin: 0 20px; background: #fff1; color: #fff; border-radius: 12px; padding: 18px 30px;
            display: inline-flex; flex-direction: column; align-items: flex-start;
            font-size: 1.3em; transition: opacity .7s, transform .7s;
        }
        .transport-item.fadeout { opacity: 0; transform: translateY(30px);}
        .transport-item.fadein { opacity: 1; transform: translateY(0);}
    </style>
</head>
<body>
<div class="ticker-container">
    <div class="ticker-scroll" id="tickerScroll">
        <!-- JS will populate -->
    </div>
</div>
<script>
const data = [
    { route: "18", dest: "Miramar", next: "2 min" },
    { route: "21", dest: "Airport", next: "5 min" },
    { route: "22", dest: "Mairangi", next: "1 min" },
    { route: "1",  dest: "Island Bay", next: "7 min" }
];
// For seamless loop, double the data
function renderInitialTicker() {
    const el = document.getElementById('tickerScroll');
    for (let i = 0; i < 2; i++) {
        data.forEach((item, idx) => {
            let d = document.createElement('div');
            d.className = "transport-item";
            d.setAttribute('data-route', item.route);
            d.innerHTML = `<strong>${item.route}</strong> – ${item.dest} <span>${item.next}</span>`;
            el.appendChild(d);
        });
    }
}
// Simulate data changing every 10s, but don't touch animation!
function updateTickerData() {
    // Randomise order for demo
    data.sort(() => Math.random()-0.5);
    // Just update content of each item node (twice for seamless)
    const nodes = document.querySelectorAll('.transport-item');
    for (let set = 0; set < 2; set++) {
        data.forEach((item, idx) => {
            const i = set*data.length + idx;
            if (!nodes[i]) return;
            // Animate out
            nodes[i].classList.add('fadeout');
            setTimeout(() => {
                nodes[i].innerHTML = `<strong>${item.route}</strong> – ${item.dest} <span>${item.next}</span>`;
                nodes[i].classList.remove('fadeout');
                nodes[i].classList.add('fadein');
                setTimeout(()=>nodes[i].classList.remove('fadein'), 700);
            }, 500);
        });
    }
}
renderInitialTicker();
setInterval(updateTickerData, 10000);
</script>
</body>
</html>
